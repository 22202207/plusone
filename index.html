<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>商品一覧</title>
<style>
  :root{--gap:1rem;--card-min:220px}
  body{font-family:sans-serif;margin:0 auto;max-width:1200px;padding:1rem}
  h1{margin-bottom:1rem}

  .grid{display:grid;gap:var(--gap);grid-template-columns:repeat(auto-fill,minmax(var(--card-min),1fr))}
  @media (max-width:640px){.grid{grid-template-columns:repeat(2,1fr)}}

  .card{border:1px solid #e0e0e0;border-radius:8px;padding:.8rem;display:flex;flex-direction:column;transition:box-shadow .15s}
  .card:hover{box-shadow:0 4px 12px rgba(0,0,0,.12)}
  .card-link{flex:1;text-decoration:none;color:inherit;display:flex;flex-direction:column}
  .card img{width:100%;height:160px;object-fit:cover;border-radius:4px}
  @media (max-width:640px){.card img{height:140px}}
  .card h3{font-size:1rem;margin:.6rem 0 .4rem}
  .price{font-weight:bold;margin-bottom:.6rem}
  .ctrl{display:flex;align-items:center;gap:.4rem;margin-top:.4rem}
  .ctrl button{width:28px;height:28px;border:1px solid #bbb;background:#fafafa;border-radius:4px;cursor:pointer}
  .ctrl span{min-width:2ch;text-align:center}

  .btn{flex:1;padding:.45rem;border:none;border-radius:4px;background:#4f46e5;color:#fff;cursor:pointer}

  .cart-fixed{position:fixed;bottom:1rem;right:1rem;background:#4f46e5;color:#fff;border-radius:24px;padding:.6rem 1rem;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,.2);z-index:10}
</style>
</head>
<body>
<h1>商品一覧</h1>

<div class="grid" id="list">
  <!-- ====== 8 商品：必要ぶんコピペして id・画像・名称・価格を調整 ======= -->
  <div class="card" data-id="2-B0091GCPPM">
    <a href="2-B0091GCPPM.html" class="card-link">
      <img src="./images/2-B0091GCPPM.jpg" alt="">
      <h3>2-B0091GCPPM</h3>
      <div class="price" data-price="0">¥ --</div>
    </a>

    <div class="ctrl">
      <button class="dec">－</button>
      <span class="qty">1</span>
      <button class="inc">＋</button>
      <button class="btn add-cart">カートに追加</button>
    </div>
  </div>

  <!-- ↓ 以下同様に data-id を各商品IDに合わせて複製 -->
  <!-- … -->
</div>

<div id="cart-fab" class="cart-fixed">カート (0)</div>

<script>
/* ----- カート情報を localStorage で保持 ----- */
const CART_KEY = 'my_cart';
const cart = JSON.parse(localStorage.getItem(CART_KEY) || '{}');
const fab  = document.getElementById('cart-fab');
updateFab();

/* 数量ボタンの処理（イベント委譲） */
document.getElementById('list').addEventListener('click', e=>{
  const card = e.target.closest('.card');
  if(!card) return;

  const id   = card.dataset.id;
  const qtyEl= card.querySelector('.qty');
  let qty    = Number(qtyEl.textContent);

  if(e.target.matches('.inc')){
    if(qty<99) qtyEl.textContent = ++qty;
  }else if(e.target.matches('.dec')){
    if(qty>1)  qtyEl.textContent = --qty;
  }else if(e.target.matches('.add-cart')){
    cart[id] = (cart[id]||0) + qty;
    localStorage.setItem(CART_KEY, JSON.stringify(cart));
    updateFab();
    e.target.textContent = '追加済み ✓';
    setTimeout(()=>{e.target.textContent='カートに追加';},1200);
  }
});

/* カートバッジクリック → 簡易確認 */
fab.addEventListener('click', ()=>{
  const lines = Object.entries(cart).map(([id,q])=>`${id} × ${q}`);
  alert(lines.length ? 'カート内容:\n'+lines.join('\n') : 'カートは空です');
});

/* バッジ更新 */
function updateFab(){
  const total = Object.values(cart).reduce((a,b)=>a+b,0);
  fab.textContent = `カート (${total})`;
}
</script>
</body>
</html>
